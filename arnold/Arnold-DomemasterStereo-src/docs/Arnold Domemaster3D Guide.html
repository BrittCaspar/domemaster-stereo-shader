<!DOCTYPE html>
<html>
<head>
<title>readme</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1 id="arnold-domemaster3d-guide">Arnold Domemaster3D Guide</h1>
<hr>
<p>2014-11-06 10.04 pm<br><img src="images\mtoa_domemasterstereo.png" alt="Maya DomemasterStereo for Arnold Screenshot"></p>
<h2 id="overview">Overview</h2>
<p>The Domemaster Stereo Shader is a set of fulldome stereo and latlong stereo production lens shaders for 3DS Max, Maya, Softimage, Houdini, Maxwell Studio, Mental Ray Standalone, and Arnold Standalone. The lens shaders are available for Mental Ray and Arnold, and comes integrated in Maxwell Render version 3.1+.</p>
<p>This guide covers the Arnold version of the Domemaster Stereo Shader.</p>
<p><strong>Tip:</strong> After you use the Maya shelf tools to add a fulldome or latlong stereo camera rig to your scene, you need to adjust the left camera in the stereo rig to change both of the &quot;linked&quot; lens shader attributes for the <strong>LatLongStereo</strong> or <strong>DomemasterStereo</strong> rigs.</p>
<h2 id="shader-screenshots">Shader Screenshots</h2>
<p>Here are a few screenshots of the Maya Shelf tools and the Arnold based <strong>DomemasterStereo</strong>, <strong>DomemasterWxH</strong>, and <strong>LatLongStereo</strong> shader GUIs for Maya.</p>
<h3 id="maya-shelf">Maya Shelf</h3>
<p><img src="images\arnold-domemaster3d-shelf.png" alt="Maya Shelf Icons"></p>
<h3 id="domemasterstereo-shader">DomemasterStereo Shader</h3>
<p><img src="images\domemasterstereo_attributes.png" alt="DomemasterStereo shader for Maya"></p>
<h3 id="domemasterwxh-shader">DomemasterWxH Shader</h3>
<p><img src="images\domemasterwxh_attributes.png" alt="DomemasterWxH shader for Maya"></p>
<h3 id="latlongstereo-shader">LatLongStereo Shader</h3>
<p><img src="images\latlongstereo_attributes.png" alt="LatLongStereo shader for Maya"></p>
<h2 id="maya-shader-installation">Maya Shader Installation</h2>
<h3 id="windows-64-bit">Windows 64-bit</h3>
<p><strong>Step 1.</strong><br>Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30679">Visual Studio 2012 (VC++ 11.0) Redistributable Package</a>.</p>
<p><strong>Step 2.</strong><br>Copy the .dll and .mtd files to the Arnold shaders directory:<br><code>C:\solidangle\mtoadeploy\&lt;Version&gt;\shaders\</code></p>
<p>Maya Shader Files:</p>
<pre><code>DomemasterStereo.dll
DomemasterStereo.mtd
DomemasterWxH.dll
DomemasterWxH.mtd
LatLongStereo.dll
LatLongStereo.mtd</code></pre>
<p><strong>Step 3.</strong><br>Copy the Maya AE template files to the Arnold AE folder:  </p>
<p><code>C:\solidangle\mtoadeploy\&lt;Version&gt;\scripts\mtoa\ui\ae</code></p>
<p>Note: The Maya AE Template path can be found using the following environment variable:  </p>
<p><code>%MTOA_TEMPLATES_PATH%</code> or <code>%MTOA_PATH%\scripts\mtoa\ui\ae\</code></p>
<p><strong>Step 4.</strong><br>Copy the Maya scripts from <code>Arnold-DomemasterStereo-src\install\maya\scripts</code> to your user account&#39;s Maya scripts folder.</p>
<p><strong>Step 5.</strong><br>Copy the Maya shelf file from <code>Arnold-DomemasterStereo-src\install\maya\shelves</code> to your user account&#39;s Maya shelves folder.</p>
<p><strong>Step 6.</strong><br>Copy the Maya icons from the <code>Arnold-DomemasterStereo-src\install\maya\icons</code> folder to your user account&#39;s Maya icons folder.</p>
<p><strong>Step 7.</strong><br>Edit your Windows Environment variables using the System Control Panel to include Arnold&#39;s env vars and path:  </p>
<pre><code>PATH=&quot;C:\solidangle\mtoadeploy\2014\bin\&quot;
ARNOLD_PLUGIN_PATH=&quot;C:\solidangle\mtoadeploy\2014\shaders&quot;
MAYA_RENDER_DESC_PATH=&quot;C:\solidangle\mtoadeploy\2014\&quot;</code></pre>
<h3 id="mac-64-bit">Mac 64-bit</h3>
<p><strong>Step 1.</strong><br>Copy the .dylib and .mtd files to the Arnold shaders directory:<br><code>~/solidangle/mtoa/&lt;Version&gt;/shaders/</code></p>
<p>Maya Shader Files:</p>
<pre><code>DomemasterStereo.dylib
DomemasterStereo.mtd
DomemasterWxH.dylib
DomemasterWxH.mtd
LatLongStereo.dylib
LatLongStereo.mtd</code></pre>
<p><strong>Step 2.</strong><br>Copy the Maya AE template files to the Arnold AE folder:  </p>
<p><code>~/solidangle/mtoa/&lt;Version&gt;/scripts/mtoa/ui/ae/</code></p>
<p>Note: The Maya AE Template path can be found using the following environment variable:<br><code>$(MTOA_TEMPLATES_PATH)</code> or <code>$(MTOA_PATH)/scripts/mtoa/ui/ae/</code></p>
<p><strong>Step 3.</strong><br>Copy the Maya scripts from <code>Arnold-DomemasterStereo-src\install\maya\scripts</code> to your user account&#39;s Maya scripts folder.</p>
<p><strong>Step 4.</strong><br>Copy the Maya shelf file from <code>Arnold-DomemasterStereo-src\install\maya\shelves</code> to your user account&#39;s Maya shelves folder.</p>
<p><strong>Step 5.</strong><br>Copy the Maya icons from the <code>Arnold-DomemasterStereo-src\install\maya\icons</code> folder to your user account&#39;s Maya icons folder.</p>
<p><strong>Step 6.</strong><br>Edit your <code>.bash_profile</code> to include Arnold&#39;s env vars and path:</p>
<pre><code># Arnold Settings
export PATH=&quot;$PATH:$HOME/solidangle/mtoa/2014/bin/&quot;
export ARNOLD_PLUGIN_PATH=&quot;$HOME/solidangle/mtoa/2014/shaders&quot;
export MAYA_RENDER_DESC_PATH=&quot;$HOME/solidangle/mtoa/2014/&quot;</code></pre>
<h3 id="linux-64-bit">Linux 64-bit</h3>
<p><strong>Step 1.</strong><br>Copy the .so and .mtd files to the Arnold shaders directory:</p>
<p><code>/opt/solidangle/mtoa/&lt;Version&gt;/shaders/</code></p>
<p>Maya Shader Files:</p>
<pre><code>DomemasterStereo.so
DomemasterStereo.mtd
DomemasterWxH.so
DomemasterWxH.mtd
LatLongStereo.so
LatLongStereo.mtd</code></pre>
<p><strong>Step 2.</strong><br>Copy the Maya AE template files to the Arnold AE folder:  </p>
<p><code>/opt/solidangle/mtoa/&lt;Version&gt;/scripts/mtoa/ui/ae/</code></p>
<p>Note: The Maya AE Template path can be found using the following environment variable:<br><code>$(MTOA_TEMPLATES_PATH)</code> or <code>$(MTOA_PATH)/scripts/mtoa/ui/ae/</code></p>
<p><strong>Step 3.</strong><br>Copy the Maya scripts from <code>Arnold-DomemasterStereo-src\install\maya\scripts</code> to your user account&#39;s Maya scripts folder.</p>
<p><strong>Step 4.</strong><br>Copy the Maya shelf file from <code>Arnold-DomemasterStereo-src\install\maya\shelves</code> to your user account&#39;s Maya shelves folder.</p>
<p><strong>Step 5.</strong><br>Copy the Maya icons from the <code>Arnold-DomemasterStereo-src\install\maya\icons</code> folder to your user account&#39;s Maya icons folder.</p>
<p><strong>Step 6.</strong><br>Edit your .bash_profile to include Arnold&#39;s env vars and path:</p>
<pre><code># Arnold Settings
export PATH=&quot;$PATH:/opt/solidangle/mtoa/2014/bin/&quot;
export ARNOLD_PLUGIN_PATH=&quot;/opt/solidangle/mtoa/2014/shaders&quot;
export MAYA_RENDER_DESC_PATH=&quot;/opt/solidangle/mtoa/2014/&quot;</code></pre>
<h2 id="verify-the-shader-loaded-in-arnold">Verify the Shader Loaded in Arnold</h2>
<h3 id="listing-the-nodes">Listing the Nodes</h3>
<p>You can list all of the active Arnold Shader nodes using:</p>
<h4 id="windows-node-list">Windows Node List</h4>
<p><code>C:\solidangle\mtoadeploy\&lt;Version&gt;\bin\kick.exe -nodes t</code></p>
<h4 id="mac-node-list">Mac Node List</h4>
<p><code>~/solidangle/mtoa/&lt;Version&gt;/bin/kick -nodes t</code></p>
<h4 id="linux-node-list">Linux Node List</h4>
<p><code>/opt/solidangle/mtoa/&lt;Version&gt;/bin/kick -nodes t</code></p>
<h3 id="domemasterstereo-node-parameters">DomemasterStereo Node Parameters</h3>
<p>If you run Arnold&#39;s Kick utility with the info flag you can see the DomemasterStereo shader&#39;s node parameters:</p>
<pre><code>  WARNING |  node &quot;DomemasterStereo&quot; is already installed
  node:         DomemasterStereo
  type:         camera
  output:       (null)
  parameters:   27
  filename:     C:\solidangle\mtoadeploy\2014\shaders\DomemasterStereo.dll
  version:      4.2.0.6

  Type          Name                              Default
  ------------  --------------------------------  --------------------------------
  INT           camera                            0
  FLOAT         fov_angle                         180
  FLOAT         zero_parallax_sphere              360
  FLOAT         separation                        6.5
  FLOAT         forward_tilt                      0
  BOOL          tilt_compensation                 false
  BOOL          vertical_mode                     false
  FLOAT         separation_map                    1
  FLOAT         head_turn_map                     1
  FLOAT         head_tilt_map                     0.5
  INT           flip_ray_x                        false
  INT           flip_ray_y                        false
  POINT[]       position                          0, 0, 0
  POINT[]       look_at                           0, 0, -1
  VECTOR[]      up                                0, 1, 0
  MATRIX[]      matrix                            
  FLOAT         near_clip                         0.0001
  FLOAT         far_clip                          1e+30
  FLOAT         shutter_start                     0
  FLOAT         shutter_end                       0
  ENUM          shutter_type                      box
  POINT2[]      shutter_curve                     (empty)
  ENUM          rolling_shutter                   off
  FLOAT         rolling_shutter_duration          0
  NODE          filtermap                         (null)
  ENUM          handedness                        right
  FLOAT[]       time_samples                      (2 elements)
  POINT2        screen_window_min                 -1, -1
  POINT2        screen_window_max                 1, 1
  FLOAT         exposure                          0
  STRING        name   </code></pre>
<p><img src="images\arnold_kick_sample_mac_render.png" alt="Rendering using Arnold Kick"></p>
<p>Assuming Arnold&#39;s kick tool is in your system PATH variable, you can check if the shader is installed correctly and read the default parameters using the following parameters:</p>
<h4 id="windows-parameters">Windows Parameters</h4>
<p><code>kick.exe -info DomemasterStereo</code><br><code>kick.exe -info DomemasterWxH</code><br><code>kick.exe -info LatLongStereo</code></p>
<p>or </p>
<p>you can check if the shader is installed and define a custom library search path at the same time:</p>
<p><code>kick -l C:\solidangle\mtoadeploy\&lt;Version&gt;\shaders\DomemasterStereo.dll -info DomemasterStereo</code></p>
<p><code>kick -l C:\solidangle\mtoadeploy\&lt;Version&gt;\shaders\DomemasterWxH.dll -info DomemasterWxH</code></p>
<p><code>kick -l C:\solidangle\mtoadeploy\&lt;Version&gt;\shaders\LatLongStereo.dll -info LatLongStereo</code></p>
<h4 id="mac-parameters">Mac Parameters</h4>
<p><code>kick -info DomemasterStereo</code><br><code>kick -info DomemasterWxH</code><br><code>kick -info LatLongStereo</code></p>
<p>or </p>
<p>you can check if the shader is installed and define a custom library search path at the same time:</p>
<p><code>kick -l ~/solidangle/mtoa/&lt;Version&gt;/shaders/DomemasterStereo.dylib -info DomemasterStereo</code></p>
<p><code>kick -l ~/solidangle/mtoa/&lt;Version&gt;/shaders/DomemasterWxH.dylib -info DomemasterWxH</code></p>
<p><code>kick -l ~/solidangle/mtoa/&lt;Version&gt;/shaders/LatLongStereo.dylib -info LatLongStereo</code></p>
<h4 id="linux-parameters">Linux Parameters</h4>
<p><code>kick -info DomemasterStereo</code><br><code>kick -info DomemasterWxH</code><br><code>kick -info LatLongStereo</code></p>
<p>or </p>
<p>you can check if the shader is installed and define a custom library search path at the same time:</p>
<p><code>kick -l /opt/solidangle/mtoa/&lt;Version&gt;/shaders/DomemasterStereo.so -info DomemasterStereo</code></p>
<p><code>kick -l /opt/solidangle/mtoa/&lt;Version&gt;/shaders/DomemasterWxH.so -info DomemasterWxH</code></p>
<p><code>kick -l /opt/solidangle/mtoa/&lt;Version&gt;/shaders/LatLongStereo.so -info LatLongStereo</code></p>
<h2 id="rendering-the-example-scene">Rendering the Example Scene</h2>
<pre><code>kick -i DomemasterStereo_right.ass -r 512 512
kick -i DomemasterStereo_left.ass -r 512 512</code></pre>
<h2 id="compiling-instructions">Compiling Instructions</h2>
<h3 id="windows-64-bit">Windows 64-bit</h3>
<p><strong>Step 1.</strong><br>Install Visual Studio, Arnold, and MtoA. The current script has the paths for command line compiling with Visual Studio 2012 (11.0)</p>
<p><strong>Step 2.</strong><br>Open a new command prompt and cd into the source code folder.</p>
<p><strong>Step 3.</strong><br>Run the &quot;windows64_setup.bat&quot; script using a new command prompt window to setup the compiling environment variables:<br><code>windows64_setup.bat</code></p>
<p><strong>Step 4.</strong><br>Compile the source code using &quot;windows64_compile.bat&quot; bat script in the same command prompt window used step 3:<br><code>windows64_compile.bat</code></p>
<h3 id="mac-os-x-64-bit">Mac OS X 64-bit</h3>
<p><strong>Step 1.</strong><br>Install Xcode, Arnold, and MtoA.</p>
<p><strong>Step 2.</strong><br>Open a new terminal window and cd into the source code folder.</p>
<p><strong>Step 3.</strong><br>Edit the Makefile.osx file and change the &quot;MAYA_VERSION&quot; variable to match your current Maya release, and update the &quot;MTOA_API_VERSION&quot; variable to match your current Arnold release number. You might want to edit the &quot;macosx_version_min&quot; option if you are compiling the shader exclusively for systems running Mac OS X Mavericks 10.9 or newer.</p>
<p><strong>Step 4.</strong><br>Use the Mac OS X makefile to compile a new DomemasterStereo.dylib shader:<br><code>Make -f Makefile.osx</code></p>
<p><strong>Step 5.</strong><br>You can check your compiled dylib architecture with the following command:</p>
<pre><code>bash-3.2# lipo -info DomemasterStereo.dylib 
Non-fat file: DomemasterStereo.dylib is architecture: x86_64</code></pre>
<h3 id="linux-64-bit">Linux 64-bit</h3>
<p><strong>Step 1.</strong><br>Install G++, Arnold, and MtoA.</p>
<p><strong>Step 2.</strong><br>Open a new terminal window and cd into the source code folder.</p>
<p><strong>Step 3.</strong><br>Edit the Makefile and change the &quot;MAYA_VERSION&quot; variable to match your current Maya release, and update the &quot;MTOA_API_VERSION&quot; variable to match your current Arnold release number.</p>
<p><strong>Step 4.</strong><br>Use the linux makefile to compile a new DomemasterStereo.so shader:<br><code>Make -f Makefile</code></p>
<h2 id="credits">Credits</h2>
<ul>
<li>Roberto Ziche created the original domeAFL_FOV_Stereo shader for 3DS Max.</li>
<li>Luis Silva created the initial Arnold lens shader port for Softimage.</li>
<li>Andrew Hazelden finished porting the DomemasterStereo lens shader for Arnold on Maya/Softimage/Houdini.</li>
<li>Daniel Ott created the original 2D domeAFL_FOV, and domeAFL_WxH lens shaders for mental ray.</li>
</ul>
<h2 id="version-history">Version History</h2>
<h3 id="version-0-1-2014-11-01">Version 0.1 - 2014-11-01</h3>
<p>Initial Arnold support for Maya/Softimage/Houdini.</p>
<p>Created DomemasterStereo.mtd, DomemasterWxH, and LatLongStereo.mtd documents for Maya and Houdini users.</p>
<p>Created Maya stereo rig scripts for the LatLongStereo and DomemasterStereo lens shaders.</p>
<p>Changed the attribute names to match the Domemaster Stereo Shader / Arnold conventions:</p>
<p><code>Dome_Radius</code> is now named <code>zero_parallax_sphere</code>, and <code>dome_tilt</code> is now <code>forward_tilt</code> based upon the fulldome NING discussion.</p>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
