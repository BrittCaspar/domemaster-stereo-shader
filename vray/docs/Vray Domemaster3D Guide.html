<!DOCTYPE html>
<html>
<head>
<title>readme</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: 29d1c5bc36da364ad5aa86946d420b7bbc54a253 */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1>Vray Domemaster3D Guide</h1>
<hr />
<p>2015-05-21 
**
- Table of Contents
    *    <a href="#overview">Overview</a>
    *    <a href="#known-issues">Known Issues</a>
    *    <a href="#vray-standalone">Vray Standalone</a>
        +    <a href="#domemasterstereo-in-a-vrscene-file">DomemasterStereo in a VRSCENE File</a>
        +    <a href="#latlongstereo-in-a-vrscene-file">LatLongStereo in a VRSCENE File</a>
    *    <a href="#vray-standalone-shader-installation">Vray Standalone Shader Installation</a>
    *    <a href="#vray-for-3ds-max-shader-installation">Vray for 3DS Max Shader Installation</a>
    *    <a href="#vray-rt-for-3ds-max-shader-installation">Vray RT for 3DS Max Shader Installation</a>
        +    <a href="#windows-64-bit-1">Windows 64-bit</a>
    *    <a href="#verify-the-shader-is-loaded-in-vray">Verify the Shader is Loaded in Vray</a>
        +    <a href="#vray-shader-parameters-screenshot">Vray Shader Parameters Screenshot</a>
        +    <a href="#listing-the-nodes">Listing the Nodes</a>
            *    <a href="#windows-node-list">Windows Node List</a>
            *    <a href="#mac-node-list">Mac Node List</a>
            *    <a href="#linux-node-list">Linux Node List</a>
        +    <a href="#node-parameters">Node Parameters</a>
            *    <a href="#plgparamsexe-domemasterstereo">plgparams.exe DomemasterStereo</a>
            *    <a href="#plgparamsexe-latlongstereo">plgparams.exe LatLongStereo</a>
            *    <a href="#windows-parameters">Windows Parameters</a>
            *    <a href="#mac-parameters">Mac Parameters</a>
            *    <a href="#linux-parameters">Linux Parameters</a>
    *    <a href="#rendering-the-example-scenes">Rendering the Example Scenes</a>
    *    <a href="#vray-for-3ds-max-lens-shaders">Vray for 3DS Max Lens Shaders</a>
    *    <a href="#adding-a-vray-lens-shader-in-maya">Adding a Vray Lens Shader in Maya</a>
        +    <a href="#vray-domemasterstereo-camera">VRay DomemasterStereo Camera</a>
        +    <a href="#vray-latlongstereo-camera">VRay LatLongStereo Camera</a>
        +    <a href="#removing-a-lens-shader">Removing a Lens Shader</a>
    *    <a href="#maya-shader-installation">Maya Shader Installation</a>
        +    <a href="#windows-64-bit-2">Windows 64-bit</a>
        +    <a href="#mac-64-bit">Mac 64-bit</a>
        +    <a href="#linux-64-bit">Linux 64-bit</a>
    *    <a href="#compiling-instructions">Compiling Instructions</a>
        +    <a href="#windows-64-bit-3">Windows 64-bit</a>
        +    <a href="#mac-os-x-64-bit">Mac OS X 64-bit</a>
        +    <a href="#linux-64-bit-1">Linux 64-bit</a>
    *    <a href="#credits">Credits</a>
    *    <a href="#version-history">Version History</a>
    *    <a href="#to-do-list">To Do List</a>
        +    <a href="#domemasterstereo-to-dos">DomemasterStereo To Dos</a>
        +    <a href="#vray-for-maya-to-dos">Vray for Maya To Dos</a>
        +    <a href="#vray-for-3ds-max-to-dos">Vray for 3DS Max To Dos</a>
        +    <a href="#shader-testing-to-dos">Shader Testing To Dos</a></p>
<h2>Overview</h2>
<p>The Domemaster Stereo Shader is a set of fulldome stereo and latlong stereo production lens shaders for 3DS Max, Maya, Softimage, Houdini, Maxwell Studio, Mental Ray Standalone, Vray Standalone, and Arnold Standalone. The lens shaders are available for Mental Ray, Vray, and Arnold, and comes integrated in Maxwell Render version 3.1+.</p>
<p>This guide covers the Vray version of the Domemaster Stereo Shader.</p>
<h2>Known Issues</h2>
<p>The current version of the Vray Domemaster3D shaders (as of 2015-05-09 ) is a development build.</p>
<p>The Vray Standalone version generally works without too many issues.</p>
<p>More work needs to be done to apply a black overlay to the circular outside area of the domemaster frame. Right now the DomemasterStereo shader will fill the outside circular area in the frame with a solid color based upon the current data at the 0/0/0 X/Y/Z ray angle. Also the shader doesn't apply a circular alpha channel overlay yet.</p>
<p>The Maya integration is still a work in progress. The Domemaster3D shaders are now active in the Maya render view and the custom Vray Extra Attributes are linked into the Vray for Maya .vrscene exporter when the lens shaders are added as Vray Extra Attributes on the camera shape node.</p>
<p>The first working version of the 3DS Max source code has been added and there are development shader builds for Vray 3.0 on 3DS Max 2015 and 3DS Max 2014, and Vray 2.5 for 3DS Max 2015, and Vray 2.4 for 3DS Max 2013.</p>
<h2>Vray Standalone</h2>
<p>Right now the DomemasterStereo and LatLongStereo shaders are accessible from Vray Standalone and Vray RT version 2.5 / 3.0 using the <code>vray.exe</code> command line program. Until the Maya and 3DS Max shader integrations are complete you will have to add the DomemasterStereo and LatLongStereo camera parameters to your .vrscene files manually. </p>
<p>Andrew Hazelden's <a href="https://github.com/AndrewHazelden/Vray-Scene-Syntax-Highlighter">Vray Syntax Highlighter</a> module for Notepad++, GEDIT, BBEdit, and TextWrangler is a good tool for simplifying the process of editing a .vrscene file.</p>
<h3>DomemasterStereo in a VRSCENE File</h3>
<p><img src="images/vray_standalone_domemasterStereo_render.png" alt="DomemasterStereo Renderings" /></p>
<p>You can upgrade a regular Vray camera (in this case named RenderCamShape) to a DomemasterStereo camera by finding the camera entry in your Vray .vrscene file and pasting the following text in its place:</p>
<pre><code>DomemasterStereo RenderCamShape {
  camera=0;
  fov_angle=360.0;
  parallax_distance=355.0;
  separation=6.5;
  forward_tilt=0.0;
  tilt_compensation=0;
  vertical_mode=1;
  separation_map=1.0;
  head_turn_map=1.0;
  head_tilt_map=0.5;
  flip_x=0;
  flip_y=0;
  neck_offset=0.0;
}
</code></pre>

<p>Note: camera=0 means center view, camera=1 is left view, and camera=2 is right view.</p>
<p>You can test this code out using the included vray example scene &quot;vray 2 DomemasterStereo.vrscene&quot;. To render the sample scene launch vray standalone from the command prompt with:</p>
<pre><code>vray.exe -sceneFile=&quot;vray 2 DomemasterStereo.vrscene&quot;
</code></pre>

<h3>LatLongStereo in a VRSCENE File</h3>
<p><img src="images/vray_standalone_LatLongStereo_render.png" alt="LatLongStereo Renderings" /></p>
<p>You can upgrade a regular Vray camera (in this case named RenderCamShape) to a LatLongStereo camera by finding the camera entry in your Vray .vrscene file and pasting the following text in its place:</p>
<pre><code>LatLongStereo RenderCamShape {
  camera=0;
  fov_vert_angle=180.0;
  fov_horiz_angle=360.0;
  parallax_distance=355.0;
  separation=6.5;
  zenith_mode=1;
  separation_map=1;
  neck_offset=0.0;
  zenith_fov=0;
}
</code></pre>

<p>Note: camera=0 means center view, camera=1 is left view, and camera=2 is right view.</p>
<p>You can test this code out using the included vray example scene &quot;vray 2 LatLongStereo.vrscene&quot;. To render the sample scene launch vray standalone from the command prompt with:</p>
<pre><code>vray.exe -sceneFile=&quot;vray 2 LatLongStereo.vrscene&quot; 
</code></pre>

<h2>Vray Standalone Shader Installation</h2>
<h3>Windows 64-bit</h3>
<p><strong>Step 1.</strong> Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40784">Visual Studio 2013 (VC++ 12.0) Redistributable Package</a>.</p>
<p><strong>Step 2.</strong> Copy the .dll files to the vray-plugins directory:  
</p>
<p><code>C:\Program Files\Chaos Group\V-Ray\Standalone for x64\bin\x64\vc101\plugins</code></p>
<p>Vray Plugin Files:</p>
<pre><code>vray_DomemasterStereo.dll
vray_LatLongStereo.dll
</code></pre>

<p><strong>Step 3.</strong> Edit the Windows environment variables and add an entry for the  <code>VRAY_PLUGINS_x64</code> Vray standalone plugins path location.</p>
<p><img src="images/adding-a-new-env-var.png" alt="Adding an ENV Var" /></p>
<p>For Vray Standalone 2.5 the standard <code>VRAY_PLUGINS_x64</code> setting would be:   
</p>
<p><code>VRAY_PLUGINS_x64</code><br />
<code>C:\Program Files\Chaos Group\V-Ray\Standalone for x64\bin\x64\vc101\plugins</code></p>
<h2>Vray for 3DS Max Shader Installation</h2>
<p>There are now Vray 2.4 for 3DS Max 2013, Vray 2.5 for 3DS Max 2015, Vray 3.0 for 3DS Max 2015, and Vray 3.0 for 3DS Max 2014 builds of the Domemaster3D shaders.</p>
<h3>Windows 64-bit</h3>
<p><strong>Step 1.</strong> Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40784">Visual Studio 2013 (VC++ 12.0) Redistributable Package</a>.</p>
<p><strong>Step 2.</strong> Copy the .dlo files to the Vray for 3DS Max plugins directory.</p>
<p><code>C:\Program Files\Autodesk\3ds Max &lt;Max Version&gt;\plugins\vrayplugins</code></p>
<p>Note: Change <code>&lt;Max Version&gt;</code> to the release number of 3DS Max. Example: Write in 2015 for the <code>&lt;Max Version&gt;</code> if you are using 3DS Max 2015.</p>
<p>Vray Plugin Files:  
</p>
<pre><code>vraylatlongstereo2015.dlo
vraydomemasterstereo2015.dlo

vraylatlongstereo2014.dlo
vraydomemasterstereo2014.dlo

vraylatlongstereo2013.dlo
vraydomemasetrstereo2013.dlo
</code></pre>

<p><strong>Step 3.</strong>
If you get an &quot;Error Loading Plugin-DLL&quot; error message in 3DS Max when when you try and load the shader it means you haven't installed the Microsoft Visual Studio 2013 x64 Redistributable library that was mentioned as a required stage in <strong>Step 1</strong>. Now is a good time to go back to step 1 and actually install the library file!</p>
<p><img src="images/vray-max-no-vs2013-libs.png" alt="Visual Studio 2013 Library Missing Error" />  
</p>
<h2>Vray RT for 3DS Max Shader Installation</h2>
<h3>Windows 64-bit</h3>
<p><strong>Step 1.</strong> Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40784">Visual Studio 2013 (VC++ 12.0) Redistributable Package</a>.</p>
<p><strong>Step 2.</strong> Copy the .dll files to the Vray RT plugins directory.</p>
<p><code>C:\Program Files\Chaos Group\V-Ray\RT for 3ds Max &lt;Max Version&gt; for x64\bin\plugins</code></p>
<p>Note: Change <Max Version> to the release number of 3DS Max. Example: Write in 2015 for the <Max Version> if you are using 3DS Max 2015.</p>
<p>Vray Plugin Files:  
</p>
<pre><code>vray_DomemasterStereo.dll (Not compiled yet)
vray_LatLongStereo.dll
</code></pre>

<p><strong>Step 3.</strong> Edit the Windows environment variables and add an entry for the  <code>VRAY_PLUGINS_x64</code> Vray RT plugins path location.</p>
<p><code>C:\Program Files\Chaos Group\V-Ray\RT for 3ds Max &lt;Max Version&gt; for x64\bin\plugins</code></p>
<p>Note: Change <code>&lt;Max Version&gt;</code> to the release number of 3DS Max. Example: Write in 2015 for the <code>&lt;Max Version&gt;</code> if you are using 3DS Max 2015.</p>
<p><strong>Step 4.</strong> Edit the Windows ENV Path and add the VRay RT <code>Bin</code> folder to the list.</p>
<p><code>;C:\Program Files\Chaos Group\V-Ray\RT for 3ds Max &lt;Max Version&gt; for x64\bin</code></p>
<p>Note: Change <code>&lt;Max Version&gt;</code> to the release number of 3DS Max. Example: Write in 2015 for the <code>&lt;Max Version&gt;</code> if you are using 3DS Max 2015.</p>
<h2>Verify the Shader is Loaded in Vray</h2>
<h3>Vray Shader Parameters Screenshot</h3>
<p><img src="images/vray_plugin_parameters.png" alt="Plgparams Listing the Shader Parameters" />  
</p>
<p><img src="images/vray_mac_plugin_params_latlongstereo.png" alt="Plgparams Listing the Shader Parameters on the Mac 1" />  
</p>
<p><img src="images/vray_mac_plugin_params_domemasterstereo.png" alt="Plgparams Listing the Shader Parameters on the Mac 2" />  
</p>
<h3>Listing the Nodes</h3>
<p>You can list all of the active Vray Shader nodes using the plugin parameters tool:</p>
<h4>Windows Node List</h4>
<p><code>cd C:\Program Files\Chaos Group\V-Ray\Standalone for x64\bin\x64\vc101\</code><br />
<code>plgparams.exe -list</code></p>
<h4>Mac Node List</h4>
<p><code>cd /Applications/ChaosGroup/V-Ray/Standalone_for_snow_leopard_x86/bin/snow_leopard_x86/gcc-4.2/</code><br />
<code>./plgparams.bin -list</code></p>
<h4>Linux Node List</h4>
<p><code>./plgparams.bin -list</code></p>
<h3>Node Parameters</h3>
<p>If you run the plgparams with the shader name listed you can see the individual node parameters. If you get a plgparams error asking for the -plugindir that means you are missing the vray plugins environment variable such as <code>VRAY_PLUGINS_x64</code> or <code>VRAY_PLUGINS_x86</code>.</p>
<h4>plgparams.exe DomemasterStereo</h4>
<pre><code>Parameters for plugin 'DomemasterStereo'
  camera: integer = 0, Center, Left, Right Camera Views
  fov_angle: float = 180, Field of View
  parallax_distance: float = 360, Parallax Distance
  separation: float = 6.5, Camera Separation Distance
  forward_tilt: float = 0, Forward Tilt
  tilt_compensation: bool = false, Tilt Compensation Mode
  vertical_mode: bool = false, Vertical Mode
  separation_map: float = 1, Separation Map
  head_turn_map: float = 1, Head Turn Map
  head_tilt_map: float = 0.5, Head Tilt map
  flip_x: bool = false, Flip X
  flip_y: bool = false, Flip Y
  neck_offset: float = 0, Neck Offset
</code></pre>

<h4>plgparams.exe LatLongStereo</h4>
<pre><code>Parameters for plugin 'LatLongStereo'
  camera: integer = 0, Center, Left, Right Camera Views
  fov_vert_angle: float = 180, Field of View Vertical
  fov_horiz_angle: float = 360, Field of View Horizontal
  parallax_distance: float = 360, Zero Parallax Distance
  separation: float = 6.5, Camera Separation
  zenith_mode: bool = false, Zenith Mode
  separation_map: float = 1, Separation Map
  head_tilt_map: float = 0.5, Head Tilt map
  flip_x: bool = false, Flip X
  flip_y: bool = false, Flip Y
  neck_offset: float = 0, Neck Offset
  zenith_fov: float = 0, Hemi-equirectangular
</code></pre>

<p><strong>Note:</strong> If you receive the following error message it means you have tried to load a Vray 2.5 shader in Vray 3.0:  
</p>
<pre><code>// Error: Error loading plugin library &quot;C:\Program Files\Autodesk\Maya2015\vray\vrayplugins\vray_DomemasterStereo.dll&quot; (127): The specified procedure could not be found. //   
// Error: Error loading plugin library &quot;C:\Program Files\Autodesk\Maya2015\vray\vrayplugins\vray_LatLongStereo.dll&quot; (127): The specified procedure could not be found. //   
</code></pre>

<h4>Windows Parameters</h4>
<p><code>plgparams.exe DomemasterStereo</code><br />
<code>plgparams.exe LatLongStereo</code>  
</p>
<h4>Mac Parameters</h4>
<p><code>./plgparams.bin DomemasterStereo</code><br />
<code>./plgparams.bin LatLongStereo</code>  
</p>
<h4>Linux Parameters</h4>
<p><code>./plgparams.bin DomemasterStereo</code><br />
<code>./plgparams.bin LatLongStereo</code>  
</p>
<h2>Rendering the Example Scenes</h2>
<p>If you navigate to the Domemaster3D vray scenes folder you can try rendering the sample vray standalone vrscene files.</p>
<pre><code>vray.exe -sceneFile=&quot;vray 2 DomemasterStereo.vrscene&quot;  
vray.exe -sceneFile=&quot;vray 2 LatLongStereo.vrscene&quot;  

vray.exe -sceneFile=&quot;LatLongStereo_Boxworld_center.vrscene&quot;  
vray.exe -sceneFile=&quot;LatLongStereo_Boxworld_left.vrscene&quot;  
vray.exe -sceneFile=&quot;LatLongStereo_Boxworld_right.vrscene&quot;  

vray.exe -sceneFile=&quot;DomemasterStereo_Boxworld_center.vrscene&quot;  
vray.exe -sceneFile=&quot;DomemasterStereo_Boxworld_left.vrscene&quot;  
vray.exe -sceneFile=&quot;DomemasterStereo_Boxworld_right.vrscene&quot;  
</code></pre>

<h2>Vray for 3DS Max Lens Shaders</h2>
<p>Here are two screenshots showing the Vray for 3DS Max beta versions of the Domemaster3D lens shaders.</p>
<p><img src="images/vray_max_domemaster_stereo.png" alt="Vray for 3DS Max DomemasterStereo Shader" /></p>
<p><img src="images/vray_max_latlong_stereo.png" alt="Vray for 3DS Max LatLongStereo Shader" /></p>
<p>There are two new controls added for the first time in the Vray for 3DS Max lens shaders: </p>
<ul>
<li>A Neck Offset allows you to simulate the effect of a physical 360&deg; panoramic camera rig where the lens nodal points are shifted away from the camera origin.</li>
</ul>
<p><img src="images/neck-offset.png" alt="Neck Offset" /></p>
<ul>
<li>The hemirect (hemi-equirectangular) checkbox in the LatLongStereo shader that lets you render a partial LatLong image where the top edge of the rendering starts aligned to the zenith pole region. This is useful if you want to render a cropped 360&deg; x 90&deg; latlong image that could then be converted in post into a 180&deg; domemaster (angular fisheye) image with no unused/over-rendered areas in the source image.</li>
</ul>
<h2>Adding a Vray Lens Shader in Maya</h2>
<p><img src="images/domemaster3d-vray-for-maya-shelf.png" alt="Domemaster3D Vray for Maya Shelf" /></p>
<p>There is now a custom VrayDomemaster3D shelf that makes it easier to use the Domemaster3D lens shaders. In addition to the shelf tools there is also a pair of LatLongStereo and DomemasterStereo camera rigs that work with Maya's native StereoRigManager system.</p>
<p><strong>Note:</strong> If you want to use the Maya Render View's native stereo preview system, you have to turn off the <strong>Use V-Ray VFB</strong> checkbox in the Maya render settings window.</p>
<hr />
<p>You can also add a custom Vray lens shader to a Maya camera using the <strong>VRay Extra Attributes</strong> feature. </p>
<p>To turn a normal camera into a DomemasterStereo or LatLongStereo formatted camera, select the camera's shape node in the Attribute Editor window. Open the <code>Attributes &gt; VRay</code> menu, and select either the <code>DomemasterStereo camera</code> or <code>LatLongStereo camera</code> items. </p>
<p>At this point you can turn ON the lens shader by scrolling down to the bottom of the Attribute Editor window and expanding the <code>Extra VRay Attributes</code> section. Then enable the appropriate <code>Treat as a Vray DomemasterStereo</code> or <code>Treat as a Vray LatLongStereo Cam</code> checkbox.</p>
<h3>VRay Post Translate Python Script</h3>
<p>When the <code>DomemasterStereo</code> or <code>LatLongStereo</code> Vray Extra Attribute section is enabled with the checkbox a new Vray Render Settings <strong>Mel/Python Callbacks</strong> <code>Post Translate Python Script</code> entry is added automatically that allows the <code>DomemasterStereo</code> and <code>LatLongStereo</code> lens shaders to work in the Maya Render View and the Vray Frame Buffer window.</p>
<p><img src="images/post-translate-python-script.png" alt="Post Translate Python Script" /></p>
<p>The <code>Post Translate Python Script</code> field is set to use the following python code:</p>
<pre><code>import domeVrayRender
reload(domeVrayRender)
domeVrayRender.domeVrayTranslator()
</code></pre>

<h3>VRay DomemasterStereo Camera</h3>
<p><img src="images/vray_DomemasterStereoCamera.png" alt="VRay DomemasterStereo Camera" /></p>
<h3>VRay LatLongStereo Camera</h3>
<p><img src="images/vray_LatLongStereoCamera.png" alt="VRay LatLongStereo Camera" /></p>
<h3>Removing a Lens Shader</h3>
<p>You can remove a vray lens shader from a Maya camera by opening the <code>Attributes &gt; VRay</code> menu and unchecking the specific lens shader. This will remove the lens shader's attributes that are listed in the <code>Extra VRay Attributes</code> section.</p>
<p><img src="images/vray-extra-attributes.png" alt="Adding Extra Attributes" /></p>
<p>You can also delete the python code in the <strong>Mel/Python Callbacks</strong> <code>Post Translate Python Script</code> field if you want to completly remove all references to the Domemaster3D shader elements from the Maya scene file.
<img src="images/clear-post-translate-python-script.png" alt="Clearing the Python Translator" /></p>
<h2>Maya Shader Installation</h2>
<h3>Windows 64-bit</h3>
<p><strong>Step 1.</strong> Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40784">Visual Studio 2013 (VC++ 12.0) Redistributable Package</a>.</p>
<p><strong>Step 2.</strong>
Copy the .dll files to the vray-plugins directory:  
</p>
<p><code>C:\Program Files\Autodesk\Maya&lt;Version&gt;\vray\vrayplugins\</code></p>
<p>Vray Plugin Files:</p>
<pre><code>vray_DomemasterStereo.dll
vray_LatLongStereo.dll
</code></pre>

<p><strong>Step 3.</strong>
Copy the Vray script files to the Vray scripts folder:  
</p>
<p><code>C:\Program Files\Autodesk\Maya&lt;Version&gt;\vray\scripts</code></p>
<p>Vray Script Files:</p>
<pre><code>attributes.txt
attributeNodes.txt
attributeGroups.txt
vrayAEFunctions.mel
</code></pre>

<p><strong>Note:</strong> Several of the vray script files listed above already exist in the standard vray install. Those items need to be replaced with new ones that have the DomemasterStereo and LatLongStereo modules integrated in the settings. You should make a backup copy of the original files so you can restore them if required.</p>
<p><strong>Step 4.</strong>
Copy the Maya script files to the scripts folder:  
</p>
<p><code>C:\Users\&lt;User Account&gt;\Documents\maya\&lt;Version&gt;\scripts</code></p>
<p>Vray Script Files:</p>
<p><strong>Step 5.</strong>
Copy the Maya shelf file <code>shelf_VrayDomemaster3D.mel</code> into your Shelves folder:</p>
<p><code>C:\Users\&lt;User Account&gt;\Documents\maya\&lt;Version&gt;\prefs\shelves</code></p>
<h3>Mac 64-bit</h3>
<p><strong>Step 1.</strong>
Copy the .so files to the vray-plugins directory:  
</p>
<p><code>/Applications/Autodesk/maya&lt;Version&gt;/vray/vrayplugins</code></p>
<p>Vray Plugin Files:</p>
<pre><code>vray_DomemasterStereo.so
vray_LatLongStereo.so
</code></pre>

<p><strong>Step 2.</strong>
Copy the  Vray script files to the Vray scripts folder:  
</p>
<p><code>/Applications/Autodesk/maya&lt;Version&gt;/vray/scripts</code></p>
<p>Vray Script Files:</p>
<pre><code>attributes.txt
attributeNodes.txt
attributeGroups.txt
vrayAEFunctions.mel
</code></pre>

<p><strong>Note:</strong> Several of the vray script files listed above already exist in the standard vray install. Those items need to be replaced with new ones that have the DomemasterStereo and LatLongStereo modules integrated in the settings. You should make a backup copy of the original files so you can restore them if required.</p>
<p><strong>Step 3.</strong>
Copy the Maya script files to your scripts folder.</p>
<p><strong>Step 4.</strong>
Copy the Maya shelf file <code>shelf_VrayDomemaster3D.mel</code> into your Shelves folder.</p>
<h3>Linux 64-bit</h3>
<p><strong>Step 1.</strong>
Copy the .so files to the vray-plugins directory:  
</p>
<p><code>/opt/Autodesk/Maya&lt;Version&gt;/vray/vrayplugins/</code></p>
<p>Vray Plugin Files:</p>
<pre><code>vray_DomemasterStereo.so
vray_LatLongStereo.so
</code></pre>

<p><strong>Step 3.</strong>
Copy the Vray script files to the Vray scripts folder:  
</p>
<p><code>/opt/Autodesk/Maya&lt;Version&gt;/vray/scripts</code></p>
<p>Vray Script Files:</p>
<pre><code>attributes.txt
attributeNodes.txt
attributeGroups.txt
vrayAEFunctions.mel
</code></pre>

<p><strong>Note:</strong> Several of the vray script files listed above already exist in the standard vray install. Those items need to be replaced with new ones that have the DomemasterStereo and LatLongStereo modules integrated in the settings. You should make a backup copy of the original files so you can restore them if required.</p>
<p><strong>Step 4.</strong>
Copy the Maya script files to your scripts folder.</p>
<p><strong>Step 5.</strong>
Copy the Maya shelf file <code>shelf_VrayDomemaster3D.mel</code> into your Shelves folder.</p>
<h2>Compiling Instructions</h2>
<h3>Windows 64-bit</h3>
<p><strong>Step 1.</strong>
Install Visual Studio 2013 Community Edition and Vray Standalone (which includes a copy of the Vray plugin SDK).</p>
<p><strong>Step 2.</strong>
Open a new command prompt and cd into the vray cameras source code folder:</p>
<p><code>cd C:\Program Files\Chaos Group\V-Ray\Maya &lt;Version&gt; for x64\samples\vray_plugins\cameras</code></p>
<p><strong>Step 3.</strong>
Copy the Domemaster3D <code>vray_DomemasterStereo</code> and <code>vray_LatLongStereo</code> source code folders into the vray cameras source code folder. </p>
<p><strong>Step 4.</strong>
Set the compiling mode to &quot;release&quot; and compile the source code in Visual Studio 2013 with the following project files:</p>
<p><code>vray_DomemasterStereo.vcxproj</code><br />
<code>vray_LatLongStereo.vcxproj</code>  
</p>
<p>If you are running an older version of Visual Studio you can use the legacy Microsoft Developer Studio project file:  
</p>
<p><code>vray_DomemasterStereo.dsp</code><br />
<code>vray_LatLongStereo.dsp</code>  
</p>
<h3>Mac OS X 64-bit</h3>
<p>The first version of Vray for Mac OS X support has been added to the lens shaders. Mac OS X 10.9 Mavericks or 10.10 Yosemite is required to use the lens shaders.</p>
<p><strong>Step 1.</strong>
Install Xcode and Vray Standalone (which includes a copy of the Vray plugin SDK).</p>
<p><strong>Step 2.</strong>
Open a new terminal window and cd into the source code folder.</p>
<p><strong>Step 3.</strong>
Copy the Vray Lib and Include files into the matching folders located next to the source code files.</p>
<p><strong>Step 4.</strong>
Use the Mac OS X makefile to compile a new <code>vray_DomemasterStereo.so</code> and <code>vray_LatLongStereo</code> shader:  
</p>
<p><code>make -f MakefileMavericks.osx</code></p>
<p><strong>Step 5.</strong>
You can check your compiled .so architecture with the following commands:</p>
<pre><code>otool -L libvray_LatLongStereo.so   
lipo -info libvray_LatLongStereo.so   

otool -L libvray_DomemasterStereo.so  
lipo -info libvray_DomemasterStereo.so   
</code></pre>

<h3>Linux 64-bit</h3>
<p>At this point a few of the required Vray on Linux shader compiling details are not known by the Domemaster3D developer. This means Linux support is currently a work-in-progress endeavour.</p>
<h2>Credits</h2>
<ul>
<li>Roberto Ziche created the original <code>domeAFL_FOV_Stereo</code> and <code>LatLong_Stereo</code> shader for mental ray on 3DS Max.</li>
<li>Andrew Hazelden ported the shader to Vray.</li>
<li>Daniel Ott created the original 2D <code>domeAFL_FOV</code> for mental ray.</li>
<li>Thanks to Trygve Wastvedt for his help in getting the Vray for 3DS Max port started.</li>
</ul>
<h2>Version History</h2>
<h3>2015-05-21</h3>
<p><strong>Vray for Maya</strong></p>
<ul>
<li>Added Vray 3.0 for Maya on Mac OS X Support. This build works with Mac OS X 10.9 Mavericks and 10.10 Yosemite only.</li>
</ul>
<h3>2015-05-08</h3>
<p><strong>Vray for Maya</strong></p>
<ul>
<li>Added a version info MEL script</li>
<li>Added a Vray for Maya shelf toolbar labeled <code>VrayDomemaster3D</code></li>
<li>
<p>Created Maya Stereo Rig Manager scripts for the DomemasterStereo and LatLongStereo cameras.</p>
</li>
<li>
<p><strong>Note:</strong> If you want to use the Maya Render View's native stereo preview system, you have to turn off the <strong>Use V-Ray VFB</strong> checkbox in the Maya render settings window.</p>
</li>
</ul>
<h3>2015-04-02</h3>
<p><strong>Vray for Maya</strong></p>
<ul>
<li>
<p>Synced the Vray for Maya code to include the 3DS Max &quot;Neck Offset&quot; and &quot;Hemi-equirectangular&quot; features.</p>
</li>
<li>
<p>The Visual Studio compiler version has been switched to Visual Studio 2013. This means you will need to install the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=40784">Visual Studio 2013 (VC++ 12.0) Redistributable Package</a> if you don't have it on your workstations and render nodes.</p>
</li>
</ul>
<p>Note: The Domemaster3D Vray for Maya shader parameters have been updated and may break compatibility with the previous releases. This was done to syncronise the variable names in .vrscene exports with the 3DS Max version of the shaders.</p>
<p><strong>Vray for Softimage</strong></p>
<ul>
<li>Synced the Vray for Softimage SPDL code to include the 3DS Max &quot;Neck Offset&quot; and &quot;Hemi-equirectangular&quot; features.</li>
</ul>
<h3>2015-03-31</h3>
<p><strong>Vray Standalone Mac OS X Support</strong>  
</p>
<ul>
<li>Work has started on updating the Mac OS X based makefiles for the Vray DomemasterStereo and LatLongStereo shaders.</li>
</ul>
<p><img src="images/vray_mac_plugin_params_latlongstereo.png" alt="Plgparams Listing the Shader Parameters on the Mac 1" />  
</p>
<p><img src="images/vray_mac_plugin_params_domemasterstereo.png" alt="Plgparams Listing the Shader Parameters on the Mac 2" /> </p>
<p><strong>Vray for Softimage Support</strong></p>
<ul>
<li>A basic set of Vray for Sofimage SPDL and DSPreset files have been created for the DomemasterStereo and LatLongStereo lens shaders. The lens shader GUIs show up in Softimage but I haven't figured out the Softimage to Vray translator features yet which are required to export the lens shader data to a .vrscene file or activate the shader in the Vray Frame Buffer window.</li>
</ul>
<p><img src="images/vray-for-softimage-domemaster3d-shaders.png" alt="Vray for Softimage Support" /></p>
<h3>Version 0.5 - 2015-03-23</h3>
<p><strong>3DS Max Builds Added</strong></p>
<ul>
<li>
<p>There are now initial builds of the Vray for 3DS Max version of the Domemaster3D shaders. These are the first development versions of the shader so some things are expected to change before the final release.</p>
</li>
<li>
<p>The LatLongStereo shader for Vray on 3DS Max has a new Domemaster3D feature of a neck offset to simulate a physical 360&deg; camera rig's distance between a camera's lens nodal point and the origin on the tripod.</p>
</li>
<li>
<p>The LatLongStereo shader for Vray on 3DS Max has a new Domemaster3D feature of a hemirect checkbox. Hemirect stands for hemi-equirectangular which is a partial spherical rendering. The hemirect feature allows you to align partial latlong renderings so they start at the top zenith region of the latlong frame. This is useful if you want to render a latlong image with a 90&deg; vertical field of view and then warp it in post into a 180&deg; fulldome image.</p>
</li>
</ul>
<h3>Version 0.4 - 2015-02-28</h3>
<p><strong>Maya Code Update:</strong></p>
<ul>
<li>
<p>Added a Vray for Maya <code>Post Translate Python Script</code> item that handles the export and rendering of the DomemasterStereo and LatLongStereo shaders. The <code>Post Translate Python Script</code> data is stored in the vraySettings node using the <code>.ptp</code> / <code>.postTranslatePython</code> attribute. </p>
</li>
<li>
<p>When a DomemasterStereo or LatLongStereo Vray Extra Attribute is added to a Maya camera shape node and turned ON with the checkbox, a <code>Post Translate Python Script</code> code snippet is added automatically to the Vray Render Settings window.</p>
</li>
</ul>
<h3>Version 0.3 - 2014-12-24</h3>
<ul>
<li>Added Vray 3.0 support for Maya/Standalone/Vray RT</li>
<li>Added a Vray 3.0 for Max version of the <code>DomemasterStereo</code> and <code>LatLongStereo</code> source code. The GUI elements still need to be fine tuned and the Visual Studio makefile needs a bit of work to fix a <code>LibDescription</code> compiling error.</li>
</ul>
<h3>Version 0.2 - 2014-11-26</h3>
<ul>
<li>Updated the DomemasterStereo and LatLongStereo camera org code. Hopefully this fixed the stereo rendering issues</li>
<li>Rotated the DomemasterStereo view by 90 degrees clockwise to match the mental ray <code>domeAFL_FOV_Stereo</code> shader.</li>
</ul>
<h3>Version 0.1 - 2014-11-14</h3>
<ul>
<li>Initial Vray support.</li>
</ul>
<h2>To Do List</h2>
<h3>DomemasterStereo To Dos</h3>
<ul>
<li>Correctly handle the black matting of the domemaster frame when &quot;if (r &lt; 1.0)&quot; is false</li>
</ul>
<h3>Vray for Maya To Dos</h3>
<ul>
<li>Implement a screen space texture UV re-mapping mode in the lens shaders for the stereo control maps.</li>
</ul>
<h3>Vray for 3DS Max To Dos</h3>
<ul>
<li>Test the new Vray for 3DS Max shader builds.</li>
<li>Figure out a way to reduce the noise in the screen space control map based renderings</li>
<li>Improve the screen space texture map support</li>
</ul>
<h3>Vray for Softimage To Dos</h3>
<ul>
<li>Finish figuring out how the VRay/SI Bridge SDK works. Get the DomemasterStereo and LatLongStereo lens shader translator working in Softimage.</li>
</ul>
<h3>Shader Testing To Dos</h3>
<ul>
<li>Generate a .vrscene file with screen space texture maps linked into the DomemasterStereo and LatLongStereo attributes.</li>
</ul>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
